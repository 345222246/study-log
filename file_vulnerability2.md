### 웹 셸
웹 서버는 .php, .jsp, .asp와 같은 확장자의 파일을 CGI로 실행하고, 그 결과를 이용자게게 반환한다. 아래는 이용자가 요청한 파일의 확장자가 정규 표현식 ".+\\.ph(p\[3457]?|t|tml)$"를 만족하면, x-http-php로 핸들링하게 하는 apache 설정파일이다. x-http-php는 PHP 엔진이며 요청한 파일을 실행하고, 그 결과를 반환한다. 
.php, .php3, .ptml 이 위의 정규표현식을 만족한다.
```http
<FilesMatch ".+\.ph(p[3457]?|t|tml)$">
	SetHandler application\x-http-php
</FilesMatch>
```
많은 웹 서버들이 php 파일에 대해 위와 같은 핸들링을 지원한다. 따라서 공격자가 임의의 php 소스파일을 .php 확장자로 업로드하고, GET 요청을 보낼 수 있다면 CGI에 의해 해당 코드가 실행되도록 할 수 있다.
### 악의적인 웹 리소스
웹 브라우저는 파일의 확장자나 응답의 content-type에 따라 요청을 다양하게 처리한다. 만약 요청한 파일의 확장자가 .html 이거나, 반환된 content-type 헤더가 text/html일 경우 응답은 HTML 엔진으로 처리된다. 또, 파일의 확장자가 .png, .jpg등의 이미지 확장자이거나, content-type이 image/png일 경우에는 이미지로 렌더링 된다. 
만약 공격자가 서버에 exploit.html을 업로드하고, 이에 접근하는 URL이 h ttps://dreamhack.io/uploads/exploit.html 이라면, 브라우저는 이를 HTML로 해석된다. exploit.html에 악의적인 스크립트를 삽입하면, XSS 공격으로 이어질 수 있다. 
- CGI 란?
	- 요즘 시대에는 정적인 웹 페이지만 제공하는 웹 애플리케이션은 거의 찾아보기 힘들다. 동적인 컨텐츠를 처리하기 위해서 웹 서버와 php 같은 외부의 프로그램에 사이에서 인터페이스를 제공하는 프로토콜이 CGI 이다.

### file download vulnerability
파일 다운로드 취약점은 웹 서비스를 통해 서버의 파일 시스템에 존재하는 파일을 내려 받는 과정에서 발생하는 보안 취약점이며, 이용자가 다운로드할 파일의 이름을 임의로 정할 수 있을 때 발생한다. 
웹 서비스는 이용자가 업로드한 파일을 다운로드 받거나 이미지를 불러올 때 특정 디렉터리에 있는 파일만 접근하도록 해야한다. path traversal을 이용한 파일 다운로드 취약점은 파일 이름을 직접 입력 받아 임의 디렉터리에 있는 파일을 다운로드 받을 수 있는 취약점을 말한다. 
